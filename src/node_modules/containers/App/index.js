import React from 'react';
import {connect} from 'react-redux';

import {fetchSettings, fetchArrays, fetchCity, fetchConcept, updateWindowWidth} from 'actions';

class App extends React.Component {

  componentDidMount() {
    const { fetchSettings, fetchArrays, fetchCity, fetchConcept, updateWindowWidth } = this.props;

    fetchSettings();
    fetchArrays();
    fetchCity();
    fetchConcept();

    updateWindowWidth(document.body.clientWidth);
    window.addEventListener('resize', function() {
      updateWindowWidth(document.body.clientWidth);
    });
  }

  render() {
    return this.props.children;
  }
}

// const mapStateToProps = (state) => ({
//   arrays: filteringArrays(state.arrays, state.filterProps),
//   allArrays: toArr(state.arrays),
//   filterProps: state.filterProps
// });

const mapDispatchToProps = {
  fetchSettings,
  fetchArrays,
  fetchCity,
  fetchConcept,
  updateWindowWidth
};

export default connect(null, mapDispatchToProps)(App);
