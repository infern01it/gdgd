import React from 'react';
import ReactDOM from 'react-dom';
import {connect} from 'react-redux';

import classnames from 'classnames';
import { Close } from 'components/UiIcon';

import SimpleForm from './SimpleForm';

import { sendModal } from 'actions';

class Modal extends React.Component {
  componentWillMount() {
    this.root = document.createElement('div');
    this.root.className = 'portal'
    document.body.appendChild(this.root);
  }

  componentWillUnmount() {
    document.body.removeChild(this.root);
  }
  

  render() {
    const { title, desc, display, visible, onClose } = this.props;

    const popupClass = classnames(
      'popup', {
        'display': display,
        'visible': visible
      }
    )

    const handleSubmit = values => sendModal({ ...this.props.data, ...values });

    return ReactDOM.createPortal(
      <div className={popupClass}>
        <div
          className="popup__bg"
          onClick={onClose}
        ></div>
        <div className="popup__wrap popup-wrap">
          <button
            className="popup-wrap__close"
            onClick={onClose}
          >
            <Close />
          </button>
          <h3 className="popup-wrap__title">{title}</h3>
          <div
            className="popup-wrap__desc b-content"
            dangerouslySetInnerHTML={{__html: desc}}
          />
          <SimpleForm onSubmit={handleSubmit} />
        </div>
      </div>,
      this.root
    );
  }
}

export default Modal;