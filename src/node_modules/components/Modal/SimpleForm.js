
import React, { Component } from 'react';
import { Field, reduxForm, SubmissionError } from 'redux-form';
import classnames from 'classnames';
import InputMask from 'react-input-mask';

class SimpleForm extends Component {

  textInput({ input, meta: { touched, error }, ...custom }) {
    const hasError = touched && error !== undefined;
    const inputClassName = classnames('form-field popup-wrap__input', { 'error': hasError });
    return (
      <div className={inputClassName}>
        <input
          className="form-field__input"
          type="text"
          {...input}
          {...custom}
        />
        { hasError && <span className="form-field__msg">{error}</span> }
      </div>
    );
  }

  phoneInput({ input, meta: { touched, error }, ...custom }) {
    const hasError = touched && error !== undefined;
    const inputClassName = classnames('form-field popup-wrap__input', { 'error': hasError });
    return (
      <div className={inputClassName}>
        <InputMask
          mask="+7 (999) 999 99 99"
          maskChar="_"
          className="form-field__input"
          {...input}
          {...custom}
        />
        { hasError && <span className="form-field__msg">{error}</span> }
      </div>
    );
  }

  render() {
    const { handleSubmit } = this.props;

    return (
      <form
        className="popup-wrap__form"
        onSubmit={handleSubmit}
      >
        <div className="form-field popup-wrap__input ">
          <Field
            name="name"
            component={this.textInput}
            placeholder="Имя"
          />
        </div>
        <div className="form-field popup-wrap__input">
          <Field
            name="phone"
            component={this.phoneInput}
            placeholder="Телефон"
          />
        </div>
        <button
          type="submit"
          className="btn btn_color_ac popup-wrap__button"
        >Забронировать</button>
      </form>
    );
  }
};

export default reduxForm({
  form: 'simple',
})(SimpleForm);